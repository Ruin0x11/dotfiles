[general]
# List of accounts to be synced, separated by a comma.
accounts = main
maxsyncaccounts = 1
pythonfile = ~/.config/offlineimap/gpg.py

[Account main]
# Identifier for the local repository; e.g. the maildir to be synced via IMAP.
localrepository = main-local
# Identifier for the remote repository; i.e. the actual IMAP, usually non-local.
remoterepository = main-remote
autorefresh = 1
quick = 10
postsynchook = ~/.config/offlineimap/postsync.sh
maxage = 2020-01-01

[Repository main-local]
# OfflineIMAP supports Maildir, GmailMaildir, and IMAP for local repositories.
type = GmailMaildir
# Where should the mail be placed?
localfolders = ~/mail
nametrans = lambda folder: {'archive': '[Gmail]/All Mail',
                            }.get(folder, folder)

[Repository main-remote]
# Remote repos can be IMAP or Gmail, the latter being a preconfigured IMAP.
type = Gmail
remoteuser = ipickering2@gmail.com
remotepasseval = get_pass()
keepalive = 120
holdconnectionopen = yes
nametrans = lambda folder: {'[Gmail]/All Mail': 'archive',
                            }.get(folder, folder)

folderfilter = lambda folder: folder == '[Gmail]/All Mail'
# Necessary as of OfflineIMAP 6.5.4
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
# Necessary to work around https://github.com/OfflineIMAP/offlineimap/issues/573 (versions 7.0.12, 7.2.1)
ssl_version = tls1_2
